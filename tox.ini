[tox]
envlist = py27

[testenv:django]
commands = {envpython} -m py.test tests_django {posargs}
deps = -rtest_django_requirements.txt

[testenv:flask]
commands = {envpython} -m py.test tests_flask {posargs}
deps = -rtest_flask_requirements.txt

[testenv:docs]
basepython = python2.7
usedevelop = True
commands =
    rm -f docs/tri*.rst
    sphinx-apidoc -T -o docs/ lib
    make -C docs clean
    make -C docs html
whitelist_externals =
    make
    rm
deps =
    -rdocs/requirements.txt

[testenv:coverage]
whitelist_externals = tox
commands =
    tox -e coverage-flask
    tox -e coverage-django
    coverage html
deps =
    coverage==3.7.1
    pytest-cov

[testenv:coverage-flask]
basepython = python2.7
usedevelop = True
whitelist_externals = mv
commands =
    {envpython} -m py.test --cov tri.form -v tests_flask {posargs}
deps =
    pytest-cov
    -rtest_flask_requirements.txt

[testenv:coverage-django]
basepython = python2.7
usedevelop = True
whitelist_externals = mv
commands =
    {envpython} -m py.test --cov tri.form -v tests_django --cov-append {posargs}
deps =
    pytest-cov
    -rtest_django_requirements.txt

[testenv:ipython]
basepython = python2.7
usedevelop = True
commands = ipython
deps =
    ipython
    -rtest_requirements.txt
